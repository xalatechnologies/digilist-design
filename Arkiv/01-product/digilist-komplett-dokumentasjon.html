<hr>
<h2 id="title%3A-%E2%80%9Cdigilist-platform---komplett-prosjektdokumentasjon%E2%80%9Dsubtitle%3A-%E2%80%9Cl%C3%B8sningsforslag-med-kravkorrelasjon%E2%80%9Ddate%3A-%E2%80%9Cjanuar-2026%E2%80%9Dauthor%3A-%E2%80%9Cxala-technologies-as%E2%80%9D" tabindex="-1">title: â€œDigilist Platform - Komplett Prosjektdokumentasjonâ€
subtitle: â€œLÃ¸sningsforslag med Kravkorrelasjonâ€
date: â€œJanuar 2026â€
author: â€œXala Technologies ASâ€</h2>
<h1>Digilist Platform</h1>
<h2 id="komplett-prosjektdokumentasjon-med-kravkorrelasjon" tabindex="-1">Komplett Prosjektdokumentasjon med Kravkorrelasjon</h2>
<p><strong>Versjon:</strong> 2.0<br>
<strong>Dato:</strong> 8. januar 2026<br>
<strong>Status:</strong> Produksjonsklar<br>
<strong>Dokument-type:</strong> LÃ¸sningsforslag (Tender Response)</p>
<hr>
<h1>Del 1: Innledning og Visjon</h1>
<h2 id="1.1-sammendrag" tabindex="-1">1.1 Sammendrag</h2>
<p>Digilist er en komplett SaaS-plattform for digitalisering av kommunale
bookingsystemer i Norge. Plattformen erstatter fragmenterte, manuelle prosesser
med Ã©n digital lÃ¸sning som dekker hele verdikjeden - fra publisering av
tilgjengelige anlegg, gjennom sÃ¸knad, godkjenning og betaling, til rapportering
og revisjon.</p>
<h2 id="1.2-problemstilling" tabindex="-1">1.2 Problemstilling</h2>
<p>Norske kommuner stÃ¥r overfor betydelige utfordringer:</p>
<table>
<thead>
<tr>
<th>Problem</th>
<th>Konsekvens</th>
</tr>
</thead>
<tbody>
<tr>
<td>Fragmenterte systemer</td>
<td>Ulike systemer for ulike anlegg</td>
</tr>
<tr>
<td>Manuelle prosesser</td>
<td>Papirbaserte sÃ¸knader, telefon, e-post</td>
</tr>
<tr>
<td>Urettferdig tilgang</td>
<td>Manglende transparens i tildelingsbeslutninger</td>
</tr>
<tr>
<td>Administrativ belastning</td>
<td>Saksbehandlere overveldet av forespÃ¸rsler</td>
</tr>
<tr>
<td>DÃ¥rlig synlighet</td>
<td>Innbyggere uvitende om tilgjengelige tider</td>
</tr>
<tr>
<td>Etterlevelsesrisiko</td>
<td>Vanskelig Ã¥ spore GDPR-samtykker, revisjonslogger</td>
</tr>
</tbody>
</table>
<h2 id="1.3-l%C3%B8sningen" tabindex="-1">1.3 LÃ¸sningen</h2>
<p>Digilist tilbyr:</p>
<ul>
<li><strong>Ã‰n inngangsport</strong> for alle kommunale bookinger</li>
<li><strong>Selvbetjening</strong> for innbyggere, lag og foreninger</li>
<li><strong>Rettferdig tildeling</strong> basert pÃ¥ transparente regler</li>
<li><strong>Automatisering</strong> som reduserer manuelt arbeid</li>
<li><strong>Innebygd compliance</strong> for GDPR, Offentleglova, Arkivlova</li>
</ul>
<hr>
<h1>Del 2: Kravspesifikasjon og Korrelasjon</h1>
<h2 id="2.1-domenekrav-(dom-001-til-dom-017)" tabindex="-1">2.1 Domenekrav (DOM-001 til DOM-017)</h2>
<h3 id="dom-001%3A-listing-som-eneste-bokbare-enhet" tabindex="-1">DOM-001: Listing som ENESTE Bokbare Enhet</h3>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Verdi</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ID</strong></td>
<td>DOM-001</td>
</tr>
<tr>
<td><strong>Prioritet</strong></td>
<td>P0 (Kritisk)</td>
</tr>
<tr>
<td><strong>Status</strong></td>
<td>âœ… Dekket</td>
</tr>
<tr>
<td><strong>Kilde</strong></td>
<td>PRD v2.0</td>
</tr>
</tbody>
</table>
<p><strong>Funksjonelle krav:</strong></p>
<ul>
<li>Alle bookinger MÃ… referere til en Listing-entitet</li>
<li>Bookinger som refererer til Facility-entiteter MÃ… avvises med feilkode
<code>BOOKING_INVALID_ENTITY</code></li>
<li>API-endepunkter MÃ… kun akseptere Listing-IDer for bookingoperasjoner</li>
</ul>
<p><strong>Arkitekturkrav:</strong></p>
<ul>
<li>Termen â€œFacilityâ€ MÃ… IKKE forekomme i noe offentlig skjema, API-rute, eller
frontend-komponent</li>
<li>Kun Listing-entiteter KAN eksponeres i offentlige grensesnitt</li>
<li>Skjemafiler MÃ… eksklusivt bruke â€œlistingâ€ eller â€œlistingsâ€ terminologi</li>
</ul>
<p><strong>Implementasjon:</strong></p>
<pre class="code-block"><code class="language- ">apps/api/src/routes/listings/
â”œâ”€â”€ index.ts                    # Hovedruting
â”œâ”€â”€ listings-routes-thin.ts     # Tynnlag-ruter
â””â”€â”€ schemas.ts                  # Zod-valideringsskjemaer

packages/shared/domain/src/listings/services/
â”œâ”€â”€ listing.business.service.ts  # Forretningslogikk
â”œâ”€â”€ listing.service.factory.ts   # Service-fabrikk
â””â”€â”€ zone.business.service.ts     # Sonelogikk (intern)

packages/client/domain-hooks/src/listings/hooks/
â”œâ”€â”€ useListing.ts               # Enkelthenting
â”œâ”€â”€ useListings.ts              # Listehenting
â”œâ”€â”€ useListingDetail.ts         # Detaljvisning
â””â”€â”€ useListingManagement.ts     # CRUD-operasjoner
</code></pre>
<hr>
<h3 id="dom-002%3A-6-anleggstyper-(listing-types)" tabindex="-1">DOM-002: 6 Anleggstyper (Listing Types)</h3>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Verdi</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ID</strong></td>
<td>DOM-002</td>
</tr>
<tr>
<td><strong>Prioritet</strong></td>
<td>P0 (Kritisk)</td>
</tr>
<tr>
<td><strong>Status</strong></td>
<td>âœ… Dekket</td>
</tr>
<tr>
<td><strong>Kilde</strong></td>
<td>PRD v2.0</td>
</tr>
</tbody>
</table>
<p><strong>De 6 typenavnene:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Norsk</th>
<th>Eksempler</th>
<th>PrimÃ¦r Bookingmodell</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>SPACE</code></td>
<td>Rom/Hall</td>
<td>Idrettshall, mÃ¸terom, kultursal</td>
<td>TIME_RANGE, SLOTS</td>
</tr>
<tr>
<td><code>RESOURCE</code></td>
<td>Ressurs/Utstyr</td>
<td>Projektor, sportsutstyr</td>
<td>QUANTITY</td>
</tr>
<tr>
<td><code>EVENT</code></td>
<td>Arrangement</td>
<td>Konserter, kurs, workshops</td>
<td>CAPACITY</td>
</tr>
<tr>
<td><code>SERVICE</code></td>
<td>Tjeneste</td>
<td>Vaktmester, renhold</td>
<td>TIME_RANGE</td>
</tr>
<tr>
<td><code>VEHICLE</code></td>
<td>KjÃ¸retÃ¸y</td>
<td>Kommunebil, bÃ¥t, sykkel</td>
<td>ALL_DAY</td>
</tr>
<tr>
<td><code>OTHER</code></td>
<td>Annet</td>
<td>Spesialtilpasset</td>
<td>Alle modeller</td>
</tr>
</tbody>
</table>
<p><strong>Funksjonelle krav:</strong></p>
<ul>
<li>Listing-oppretting MÃ… stÃ¸tte nÃ¸yaktig 6 typer</li>
<li>Ugyldige listing-typer MÃ… avvises med feilkode <code>LISTING_INVALID_TYPE</code></li>
<li>Listing-type MÃ… vÃ¦re uforanderlig etter oppretting</li>
<li>Listing-type MÃ… vÃ¦re pÃ¥krevd og validert pÃ¥ skjemanivÃ¥</li>
</ul>
<p><strong>Testkrav:</strong></p>
<ul>
<li>Unit tests MÃ… verifisere at alle 6 typer aksepteres</li>
<li>Unit tests MÃ… verifisere at ugyldige typer avvises</li>
<li>Skjematester MÃ… verifisere enum-constraint hÃ¥ndhevelse</li>
</ul>
<hr>
<h3 id="dom-003%3A-6-bookingmodeller" tabindex="-1">DOM-003: 6 Bookingmodeller</h3>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Verdi</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ID</strong></td>
<td>DOM-003</td>
</tr>
<tr>
<td><strong>Prioritet</strong></td>
<td>P0 (Kritisk)</td>
</tr>
<tr>
<td><strong>Status</strong></td>
<td>âœ… Dekket</td>
</tr>
<tr>
<td><strong>Kilde</strong></td>
<td>PRD v2.0</td>
</tr>
</tbody>
</table>
<p><strong>De 6 modellene:</strong></p>
<table>
<thead>
<tr>
<th>Modell</th>
<th>Beskrivelse</th>
<th>Brukstilfelle</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>TIME_RANGE</code></td>
<td>Start og sluttid</td>
<td>Standard timebookinger</td>
</tr>
<tr>
<td><code>SLOTS</code></td>
<td>Predefinerte tidsluker</td>
<td>Faste treningstider, timer</td>
</tr>
<tr>
<td><code>ALL_DAY</code></td>
<td>Heldags booking</td>
<td>Arrangementer, konferanser</td>
</tr>
<tr>
<td><code>QUANTITY</code></td>
<td>Antallsbasert</td>
<td>Utstyrsleie</td>
</tr>
<tr>
<td><code>CAPACITY</code></td>
<td>Kapasitetsbasert</td>
<td>Events med deltagerbegrensning</td>
</tr>
<tr>
<td><code>PACKAGE</code></td>
<td>PakkelÃ¸sning</td>
<td>Bundle-tilbud</td>
</tr>
</tbody>
</table>
<p><strong>Funksjonelle krav:</strong></p>
<ul>
<li>Booking-oppretting MÃ… stÃ¸tte nÃ¸yaktig 6 modeller</li>
<li>Bookingmodell MÃ… bestemmes av Listing-konfigurasjon</li>
<li>Ugyldig bookingmodell for Listing-type MÃ… avvises</li>
<li>Bookingmodell MÃ… vÃ¦re uforanderlig etter oppretting</li>
</ul>
<p><strong>Arkitekturkrav:</strong></p>
<ul>
<li>Bookingmodell MÃ… defineres som enum i domain-data skjema</li>
<li>Bookingmodell-logikk MÃ… ligge i domenelag, ikke API-lag</li>
<li>Modellvalidering MÃ… skje fÃ¸r database-skriving</li>
</ul>
<p><strong>Testdekning:</strong></p>
<ul>
<li>Testdekning MÃ… vÃ¦re minst 95% for DOM-003</li>
</ul>
<hr>
<h3 id="dom-004%3A-unified-booking-engine" tabindex="-1">DOM-004: Unified Booking Engine</h3>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Verdi</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ID</strong></td>
<td>DOM-004</td>
</tr>
<tr>
<td><strong>Prioritet</strong></td>
<td>P0 (Kritisk)</td>
</tr>
<tr>
<td><strong>Status</strong></td>
<td>âœ… Dekket</td>
</tr>
<tr>
<td><strong>Kilde</strong></td>
<td>PRD v2.0</td>
</tr>
</tbody>
</table>
<p><strong>Funksjonelle krav:</strong></p>
<ul>
<li>Alle bookingmodeller MÃ… bruke Ã©n enkelt bookings-tabell</li>
<li>Bookings-tabellen MÃ… lagre modell-agnostiske fellesfelter</li>
<li>Modellspesifikke data MÃ… lagres i <code>booking_items</code> eller <code>allocations</code> tabeller</li>
<li>BookingspÃ¸rringer MÃ… fungere pÃ¥ tvers av alle modeller uten modellspesifikk
logikk</li>
</ul>
<p><strong>Arkitekturkrav:</strong></p>
<ul>
<li>Skjema MÃ… definere enkelt bookings-tabell med tenant_id FK</li>
<li>Ingen modellspesifikke bookingtabeller MÃ… eksistere</li>
<li>Domenetjenester MÃ… hÃ¥ndtere alle modeller gjennom unified interface</li>
</ul>
<p><strong>Databaseskjema:</strong></p>
<pre class="code-block"><code class="language-sql sql">CREATE TABLE domain.bookings (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  tenant_id UUID NOT NULL,
  org_id UUID NOT NULL,
  listing_id UUID NOT NULL,
  user_id UUID NOT NULL,
  booking_model booking_model NOT NULL,
  status booking_status DEFAULT 'draft' NOT NULL,
  starts_at TIMESTAMPTZ NOT NULL,
  ends_at TIMESTAMPTZ NOT NULL,
  quantity INTEGER,
  total_price_cents INTEGER NOT NULL,
  currency TEXT DEFAULT 'NOK' NOT NULL,
  created_at TIMESTAMPTZ DEFAULT NOW() NOT NULL,
  updated_at TIMESTAMPTZ DEFAULT NOW() NOT NULL
);
</code></pre>
<hr>
<h3 id="dom-005%3A-booking-items-(linjeartikler)" tabindex="-1">DOM-005: Booking Items (Linjeartikler)</h3>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Verdi</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ID</strong></td>
<td>DOM-005</td>
</tr>
<tr>
<td><strong>Prioritet</strong></td>
<td>P0 (Kritisk)</td>
</tr>
<tr>
<td><strong>Status</strong></td>
<td>âœ… Dekket</td>
</tr>
<tr>
<td><strong>Kilde</strong></td>
<td>PRD v2.0</td>
</tr>
</tbody>
</table>
<p><strong>Funksjonelle krav:</strong></p>
<ul>
<li>Hver booking MÃ… ha Ã©n eller flere booking_items</li>
<li>Booking items MÃ… inneholde listing snapshot pÃ¥ bookingtidspunkt</li>
<li>Booking items MÃ… vÃ¦re uforanderlige etter oppretting</li>
<li>Booking items MÃ… stÃ¸tte antall og prisinformasjon</li>
</ul>
<p><strong>Arkitekturkrav:</strong></p>
<ul>
<li>Skjema MÃ… definere <code>booking_items</code> tabell med <code>booking_id</code> FK</li>
<li>Listing snapshot MÃ… lagres som JSONB eller separate kolonner</li>
<li>Ingen direkte referanse til listings-tabell fra booking_items</li>
</ul>
<hr>
<h3 id="dom-006%3A-allocations-(kalender)" tabindex="-1">DOM-006: Allocations (Kalender)</h3>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Verdi</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ID</strong></td>
<td>DOM-006</td>
</tr>
<tr>
<td><strong>Prioritet</strong></td>
<td>P0 (Kritisk)</td>
</tr>
<tr>
<td><strong>Status</strong></td>
<td>âœ… Dekket</td>
</tr>
<tr>
<td><strong>Kilde</strong></td>
<td>PRD v2.0</td>
</tr>
</tbody>
</table>
<p><strong>Funksjonelle krav:</strong></p>
<ul>
<li>Tidsblokk-allokeringer MÃ… opprettes for hver booking</li>
<li>Allokeringer MÃ… stÃ¸tte start_time og end_time</li>
<li>Konfliktdeteksjon MÃ… sjekke allokeringer for overlappende tidsblokker</li>
<li>Allokeringer MÃ… vÃ¦re sÃ¸kbare etter datoomrÃ¥de</li>
</ul>
<p><strong>Arkitekturkrav:</strong></p>
<ul>
<li>Skjema MÃ… definere allocations-tabell med tidsrange-kolonner</li>
<li>Databaseindekser MÃ… stÃ¸tte effektive konfliktspÃ¸rringer</li>
<li>Konfliktdeteksjon MÃ… skje i domenetjeneste, ikke databasetrigger</li>
</ul>
<p><strong>Implementasjon:</strong></p>
<pre class="code-block"><code class="language-sql sql">CREATE TABLE domain.allocations (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  tenant_id UUID NOT NULL,
  booking_id UUID NOT NULL,
  bookable_unit_id UUID NOT NULL,
  time_range TSTZRANGE NOT NULL,
  status allocation_status DEFAULT 'confirmed',
  EXCLUDE USING GIST (bookable_unit_id WITH =, time_range WITH &amp;&amp;)
);
</code></pre>
<hr>
<h3 id="dom-007%3A-tilgjengelighetsregler-(availability-rules)" tabindex="-1">DOM-007: Tilgjengelighetsregler (Availability Rules)</h3>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Verdi</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ID</strong></td>
<td>DOM-007</td>
</tr>
<tr>
<td><strong>Prioritet</strong></td>
<td>P1</td>
</tr>
<tr>
<td><strong>Status</strong></td>
<td>âœ… Dekket</td>
</tr>
<tr>
<td><strong>Kilde</strong></td>
<td>PRD v2.0</td>
</tr>
</tbody>
</table>
<p><strong>Funksjonelle krav:</strong></p>
<ul>
<li>Hvert listing MÃ… stÃ¸tte per-listing tilgjengelighetsregler</li>
<li>Tilgjengelighetsregler MÃ… stÃ¸tte ukedag og tid-pÃ¥-dagen begrensninger</li>
<li>Tilgjengelighetsregler MÃ… evalueres fÃ¸r booking-oppretting</li>
<li>Bookinger utenfor tilgjengelighetsvinduer MÃ… avvises</li>
</ul>
<hr>
<h3 id="dom-008%3A-prisregler---periodebasert" tabindex="-1">DOM-008: Prisregler - Periodebasert</h3>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Verdi</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ID</strong></td>
<td>DOM-008</td>
</tr>
<tr>
<td><strong>Prioritet</strong></td>
<td>P1</td>
</tr>
<tr>
<td><strong>Status</strong></td>
<td>âœ… Dekket</td>
</tr>
<tr>
<td><strong>Kilde</strong></td>
<td>PRD v2.0</td>
</tr>
</tbody>
</table>
<p><strong>Funksjonelle krav:</strong></p>
<ul>
<li>Prisregler MÃ… stÃ¸tte basis, peak, og helgeprising per listing</li>
<li>Prisregler MÃ… evalueres ved bookingtidspunkt</li>
<li>Prisregler MÃ… stÃ¸tte datoomrÃ¥de-definisjoner</li>
</ul>
<hr>
<h3 id="dom-009%3A-prisregler---brukergruppebasert" tabindex="-1">DOM-009: Prisregler - Brukergruppebasert</h3>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Verdi</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ID</strong></td>
<td>DOM-009</td>
</tr>
<tr>
<td><strong>Prioritet</strong></td>
<td>P1</td>
</tr>
<tr>
<td><strong>Status</strong></td>
<td>âœ… Dekket</td>
</tr>
<tr>
<td><strong>Kilde</strong></td>
<td>PRD v2.0</td>
</tr>
</tbody>
</table>
<p><strong>Funksjonelle krav:</strong></p>
<ul>
<li>Prisregler MÃ… stÃ¸tte brukergruppe-definisjoner: barn, frivillige,
organisasjoner</li>
<li>Brukergruppe-prising MÃ… overstyre periodebasert prising nÃ¥r aktuelt</li>
<li>Brukergruppe-deteksjon MÃ… skje ved bookingtidspunkt</li>
<li>Prisregler MÃ… stÃ¸tte gratis prising for spesifikke grupper</li>
</ul>
<p><strong>De 6 brukergruppene (Actor Types):</strong></p>
<table>
<thead>
<tr>
<th>Brukergruppe</th>
<th>Kode</th>
<th>Rabatt</th>
<th>Verifisering</th>
</tr>
</thead>
<tbody>
<tr>
<td>Privatperson</td>
<td><code>privatperson</code></td>
<td>0%</td>
<td>Nei</td>
</tr>
<tr>
<td>NÃ¦ringsliv</td>
<td><code>naringsliv</code></td>
<td>0%</td>
<td>BRREG (valgfritt)</td>
</tr>
<tr>
<td>Forening</td>
<td><code>forening</code></td>
<td>Varierer</td>
<td>Ja</td>
</tr>
<tr>
<td>Idrettslag</td>
<td><code>idrettslag</code></td>
<td>30-70%</td>
<td>NIF</td>
</tr>
<tr>
<td>Skole</td>
<td><code>skole</code></td>
<td>100%</td>
<td>Ja</td>
</tr>
<tr>
<td>Kommune</td>
<td><code>kommune</code></td>
<td>100%</td>
<td>Ja</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="dom-010%3A-gjentakende-bookinger" tabindex="-1">DOM-010: Gjentakende Bookinger</h3>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Verdi</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ID</strong></td>
<td>DOM-010</td>
</tr>
<tr>
<td><strong>Prioritet</strong></td>
<td>P1</td>
</tr>
<tr>
<td><strong>Status</strong></td>
<td>âœ… Dekket</td>
</tr>
<tr>
<td><strong>Kilde</strong></td>
<td>PRD v2.0</td>
</tr>
</tbody>
</table>
<p><strong>Funksjonelle krav:</strong></p>
<ul>
<li>Booking-oppretting MÃ… stÃ¸tte gjentakelsesmÃ¸nstre: daglig, ukentlig, mÃ¥nedlig,
Ã¥rlig</li>
<li>Gjentakende bookinger MÃ… generere individuelle booking-instanser</li>
<li>Gjentakende booking-kansellering MÃ… kansellere alle fremtidige instanser</li>
<li>Gjentakende booking-endring MÃ… oppdatere alle fremtidige instanser</li>
</ul>
<hr>
<h3 id="dom-011%3A-sesongutleie-(seasonal-leasing)" tabindex="-1">DOM-011: Sesongutleie (Seasonal Leasing)</h3>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Verdi</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ID</strong></td>
<td>DOM-011</td>
</tr>
<tr>
<td><strong>Prioritet</strong></td>
<td>P1</td>
</tr>
<tr>
<td><strong>Status</strong></td>
<td>âœ… Dekket</td>
</tr>
<tr>
<td><strong>Kilde</strong></td>
<td>PRD v2.0</td>
</tr>
</tbody>
</table>
<p><strong>Funksjonelle krav:</strong></p>
<ul>
<li>Sesongutleie MÃ… stÃ¸tte langsiktige allokeringsregler</li>
<li>Sesongutleier MÃ… overstyre vanlig booking-tilgjengelighet</li>
<li>Sesongutleie-allokering MÃ… vÃ¦re synlig i kalender</li>
<li>Sesongutleie-konflikter med vanlige bookinger MÃ… forhindres</li>
</ul>
<p><strong>Statusflyt:</strong></p>
<pre class="code-block"><code class="language- ">sÃ¸knad_sendt â†’ sÃ¸knad_godkjent â†’ tildelt â†’ bekreftet
</code></pre>
<hr>
<h3 id="dom-012%3A-kanselleringsregler" tabindex="-1">DOM-012: Kanselleringsregler</h3>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Verdi</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ID</strong></td>
<td>DOM-012</td>
</tr>
<tr>
<td><strong>Prioritet</strong></td>
<td>P1</td>
</tr>
<tr>
<td><strong>Status</strong></td>
<td>âœ… Dekket</td>
</tr>
<tr>
<td><strong>Kilde</strong></td>
<td>PRD v2.0</td>
</tr>
</tbody>
</table>
<p><strong>Funksjonelle krav:</strong></p>
<ul>
<li>Hvert listing MÃ… stÃ¸tte kanselleringsfrist-regler</li>
<li>KanselleringsforespÃ¸rsler etter frist MÃ… avvises eller kreve admin-godkjenning</li>
<li>Kanselleringsregler MÃ… stÃ¸tte refusjonsprosent basert pÃ¥ timing</li>
<li>Kansellering MÃ… trigge varslinger til relevante parter</li>
</ul>
<hr>
<h3 id="dom-013%3A-tilleggstjenester-(additional-services)" tabindex="-1">DOM-013: Tilleggstjenester (Additional Services)</h3>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Verdi</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ID</strong></td>
<td>DOM-013</td>
</tr>
<tr>
<td><strong>Prioritet</strong></td>
<td>P1</td>
</tr>
<tr>
<td><strong>Status</strong></td>
<td>âœ… Dekket</td>
</tr>
<tr>
<td><strong>Kilde</strong></td>
<td>PRD v2.0</td>
</tr>
</tbody>
</table>
<p><strong>Funksjonelle krav:</strong></p>
<ul>
<li>Bookinger MÃ… stÃ¸tte tilleggstjenester: utstyr, catering, etc.</li>
<li>Tilleggstjenester MÃ… vÃ¦re valgbare under booking-oppretting</li>
<li>Tilleggstjenester MÃ… ha uavhengig prising</li>
<li>Tilleggstjenester MÃ… inkluderes i booking-total</li>
</ul>
<p><strong>Seed-data (27 tjenester):</strong></p>
<table>
<thead>
<tr>
<th>Kategori</th>
<th>Tjenester</th>
</tr>
</thead>
<tbody>
<tr>
<td>Personell</td>
<td>Vaktmester, Dommer, Ordensvakt, Lydtekniker, DJ, Fotograf</td>
</tr>
<tr>
<td>Renhold</td>
<td>Renhold, KlargjÃ¸ring, Omfattende renhold</td>
</tr>
<tr>
<td>Utstyr</td>
<td>Stoler, Scene, Lydanlegg, Prosjektor, Bord</td>
</tr>
<tr>
<td>Servering</td>
<td>Kaffe/te, Enkel servering, Lunsjservering, Full catering</td>
</tr>
<tr>
<td>Sport</td>
<td>Tidtaking, Speaker, Resultatservice</td>
</tr>
<tr>
<td>Teknisk</td>
<td>Streaming, Kameramann, Videokonferanse</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="dom-014%3A-vilk%C3%A5r-og-betingelser" tabindex="-1">DOM-014: VilkÃ¥r og Betingelser</h3>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Verdi</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ID</strong></td>
<td>DOM-014</td>
</tr>
<tr>
<td><strong>Prioritet</strong></td>
<td>P0 (Kritisk)</td>
</tr>
<tr>
<td><strong>Status</strong></td>
<td>âœ… Dekket</td>
</tr>
<tr>
<td><strong>Kilde</strong></td>
<td>PRD v2.0</td>
</tr>
</tbody>
</table>
<p><strong>Funksjonelle krav:</strong></p>
<ul>
<li>Booking-oppretting MÃ… kreve aksept av vilkÃ¥r og betingelser</li>
<li>VilkÃ¥r-aksept MÃ… registreres med tidsstempel og bruker-ID</li>
<li>VilkÃ¥r-aksept MÃ… kreves for hver booking, ikke per bruker</li>
<li>Booking uten vilkÃ¥r-aksept MÃ… avvises</li>
</ul>
<hr>
<h3 id="dom-015-til-dom-017%3A-%C3%B8vrige-domenekrav" tabindex="-1">DOM-015 til DOM-017: Ã˜vrige domenekrav</h3>
<table>
<thead>
<tr>
<th>ID</th>
<th>Tittel</th>
<th>Prioritet</th>
<th>Status</th>
</tr>
</thead>
<tbody>
<tr>
<td>DOM-015</td>
<td>Offentlig aktivitetskalender</td>
<td>P1</td>
<td>âœ… Dekket</td>
</tr>
<tr>
<td>DOM-016</td>
<td>Hierarkiske kategorier</td>
<td>P1</td>
<td>âœ… Dekket</td>
</tr>
<tr>
<td>DOM-017</td>
<td>Listing mediehÃ¥ndtering</td>
<td>P1</td>
<td>âœ… Dekket</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="2.2-plattformkrav-(saas-001-til-saas-010)" tabindex="-1">2.2 Plattformkrav (SAAS-001 til SAAS-010)</h2>
<h3 id="saas-001%3A-multi-tenant-arkitektur" tabindex="-1">SAAS-001: Multi-Tenant Arkitektur</h3>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Verdi</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ID</strong></td>
<td>SAAS-001</td>
</tr>
<tr>
<td><strong>Prioritet</strong></td>
<td>P0 (Kritisk)</td>
</tr>
<tr>
<td><strong>Status</strong></td>
<td>âœ… Dekket</td>
</tr>
<tr>
<td><strong>Kilde</strong></td>
<td>PRD v2.0</td>
</tr>
</tbody>
</table>
<p><strong>Funksjonelle krav:</strong></p>
<ul>
<li>Alle tenant-scoped tabeller MÃ… ha <code>tenant_id</code> kolonne</li>
<li>Alle spÃ¸rringer MÃ… filtrere basert pÃ¥ tenant-kontekst</li>
<li>API guards MÃ… validere tenant-tilgang</li>
<li>Kryssing av tenant-data krever saas scope</li>
</ul>
<p><strong>Implementasjon:</strong></p>
<pre class="code-block"><code class="language-sql sql">-- Tenant-tabell
CREATE TABLE platform.tenants (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name TEXT NOT NULL,
  slug TEXT UNIQUE NOT NULL,
  status tenant_status DEFAULT 'active',
  settings JSONB DEFAULT '{}',
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Row-Level Security
ALTER TABLE domain.listings ENABLE ROW LEVEL SECURITY;
CREATE POLICY tenant_isolation ON domain.listings
  USING (tenant_id = current_setting('app.tenant_id')::uuid);
</code></pre>
<hr>
<h3 id="saas-002%3A-rollebasert-tilgangskontroll-(rbac)" tabindex="-1">SAAS-002: Rollebasert Tilgangskontroll (RBAC)</h3>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Verdi</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ID</strong></td>
<td>SAAS-002</td>
</tr>
<tr>
<td><strong>Prioritet</strong></td>
<td>P0 (Kritisk)</td>
</tr>
<tr>
<td><strong>Status</strong></td>
<td>âœ… Dekket</td>
</tr>
</tbody>
</table>
<p><strong>Fire nivÃ¥er av tilgangskontroll:</strong></p>
<table>
<thead>
<tr>
<th>Scope</th>
<th>NivÃ¥</th>
<th>Beskrivelse</th>
<th>Eksempel-rettigheter</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>user</code></td>
<td>Personlig</td>
<td>Egen portal</td>
<td>Se egne bookinger, opprette booking</td>
</tr>
<tr>
<td><code>org</code></td>
<td>Organisasjon</td>
<td>Avdeling/enhet</td>
<td>Administrere anlegg, godkjenne</td>
</tr>
<tr>
<td><code>tenant</code></td>
<td>Kommune</td>
<td>Hele tenant</td>
<td>Administrere organisasjoner</td>
</tr>
<tr>
<td><code>saas</code></td>
<td>Platform</td>
<td>Alle tenants</td>
<td>Systemkonfigurasjon</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="saas-003%3A-id-porten-integrasjon" tabindex="-1">SAAS-003: ID-porten Integrasjon</h3>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Verdi</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ID</strong></td>
<td>SAAS-003</td>
</tr>
<tr>
<td><strong>Prioritet</strong></td>
<td>P0 (Kritisk)</td>
</tr>
<tr>
<td><strong>Status</strong></td>
<td>ğŸ”„ I utvikling</td>
</tr>
</tbody>
</table>
<p><strong>Funksjonelle krav:</strong></p>
<ul>
<li>System MÃ… stÃ¸tte autentisering via ID-porten (BankID/MinID)</li>
<li>OpenID Connect med PKCE flow</li>
<li>SikkerhetsnivÃ¥ 3/4</li>
</ul>
<hr>
<h2 id="2.3-sikkerhetskrav-(sec-001-til-sec-004)" tabindex="-1">2.3 Sikkerhetskrav (SEC-001 til SEC-004)</h2>
<h3 id="sec-001%3A-datakryptering" tabindex="-1">SEC-001: Datakryptering</h3>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Verdi</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ID</strong></td>
<td>SEC-001</td>
</tr>
<tr>
<td><strong>Prioritet</strong></td>
<td>P0 (Kritisk)</td>
</tr>
<tr>
<td><strong>Status</strong></td>
<td>âœ… Dekket</td>
</tr>
</tbody>
</table>
<p><strong>Krav:</strong></p>
<ul>
<li>TLS 1.3 for all trafikk</li>
<li>AES-256 for persondata i hvile</li>
<li>httpOnly, Secure, SameSite cookies</li>
</ul>
<hr>
<h3 id="sec-002%3A-inputvalidering" tabindex="-1">SEC-002: Inputvalidering</h3>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Verdi</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ID</strong></td>
<td>SEC-002</td>
</tr>
<tr>
<td><strong>Prioritet</strong></td>
<td>P0 (Kritisk)</td>
</tr>
<tr>
<td><strong>Status</strong></td>
<td>âœ… Dekket</td>
</tr>
</tbody>
</table>
<p><strong>Krav:</strong></p>
<ul>
<li>Alle inputs MÃ… valideres med Zod-skjemaer</li>
<li>SQL injection forebygges via ORM (Drizzle)</li>
<li>XSS forebygges via CSP headers</li>
<li>CSRF-beskyttelse pÃ¥ alle muterende operasjoner</li>
</ul>
<hr>
<h3 id="sec-003%3A-revisjonslogging" tabindex="-1">SEC-003: Revisjonslogging</h3>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Verdi</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ID</strong></td>
<td>SEC-003</td>
</tr>
<tr>
<td><strong>Prioritet</strong></td>
<td>P0 (Kritisk)</td>
</tr>
<tr>
<td><strong>Status</strong></td>
<td>âœ… Dekket</td>
</tr>
</tbody>
</table>
<p><strong>Krav:</strong></p>
<ul>
<li>Alle tilstandsendringer MÃ… logges med brukerkontekst</li>
<li>Revisjonslogg MÃ… vÃ¦re uforanderlig (append-only)</li>
<li>Oppbevaringstid: 10 Ã¥r</li>
</ul>
<hr>
<h3 id="sec-004%3A-gdpr-etterlevelse" tabindex="-1">SEC-004: GDPR Etterlevelse</h3>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Verdi</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ID</strong></td>
<td>SEC-004</td>
</tr>
<tr>
<td><strong>Prioritet</strong></td>
<td>P0 (Kritisk)</td>
</tr>
<tr>
<td><strong>Status</strong></td>
<td>âœ… Dekket</td>
</tr>
</tbody>
</table>
<p><strong>Artikkel-mapping:</strong></p>
<table>
<thead>
<tr>
<th>GDPR Artikkel</th>
<th>Krav</th>
<th>Implementasjon</th>
</tr>
</thead>
<tbody>
<tr>
<td>Art. 6</td>
<td>Lovlig behandling</td>
<td>Eksplisitt samtykke per booking</td>
</tr>
<tr>
<td>Art. 12-14</td>
<td>Informasjonsplikt</td>
<td>PersonvernerklÃ¦ring</td>
</tr>
<tr>
<td>Art. 15</td>
<td>Rett til innsyn</td>
<td>JSON eksport</td>
</tr>
<tr>
<td>Art. 16</td>
<td>Rett til retting</td>
<td>Profilredigering</td>
</tr>
<tr>
<td>Art. 17</td>
<td>Rett til sletting</td>
<td>Anonymisering</td>
</tr>
<tr>
<td>Art. 20</td>
<td>Dataportabilitet</td>
<td>JSON eksport innen 30 dager</td>
</tr>
<tr>
<td>Art. 30</td>
<td>Behandlingsprotokoll</td>
<td>Automatisk logging</td>
</tr>
<tr>
<td>Art. 32</td>
<td>Sikkerhet</td>
<td>Kryptering, tilgangskontroll</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="2.3-anbudskrav-(tnd-001-til-tnd-009)" tabindex="-1">2.3 Anbudskrav (TND-001 til TND-009)</h2>
<h3 id="tnd-001%3A-offentlig-kalender" tabindex="-1">TND-001: Offentlig Kalender</h3>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Verdi</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ID</strong></td>
<td>TND-001</td>
</tr>
<tr>
<td><strong>Prioritet</strong></td>
<td>P0 (Kritisk)</td>
</tr>
<tr>
<td><strong>Status</strong></td>
<td>âœ… Dekket</td>
</tr>
</tbody>
</table>
<p><strong>Funksjonelle krav:</strong></p>
<ul>
<li>Sanntids tilgjengelighetsvisning med flere visninger</li>
<li>MÃ¥neds-, uke-, og dagvisning</li>
<li>Offentlig kalender viser belegg uten persondata</li>
<li>Fargekodede statusindikatorer</li>
</ul>
<hr>
<h3 id="tnd-008%3A-bookingstatus-sporing" tabindex="-1">TND-008: Bookingstatus-sporing</h3>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Verdi</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ID</strong></td>
<td>TND-008</td>
</tr>
<tr>
<td><strong>Prioritet</strong></td>
<td>P0 (Kritisk)</td>
</tr>
<tr>
<td><strong>Status</strong></td>
<td>âœ… Dekket</td>
</tr>
</tbody>
</table>
<p><strong>Fullstendig tilstandsmaskin:</strong></p>
<pre class="code-block"><code class="language- ">draft â†’ pending â†’ awaiting_payment â†’ awaiting_approval â†’ confirmed â†’ completed
              â†“           â†“                â†“               â†“
           expired    expired          rejected        cancelled
                                                            â†“
                                                        refunded
</code></pre>
<hr>
<h1>Del 3: Teknisk Arkitektur</h1>
<h2 id="3.1-systemarkitektur" tabindex="-1">3.1 Systemarkitektur</h2>
<pre class="code-block"><code class="language- ">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        DIGILIST PLATFORM                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚   FRONTEND LAYER (React Router 7 / React 19)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Web App   â”‚  â”‚  Backoffice â”‚  â”‚ Learning Hubâ”‚  â”‚   Docs    â”‚ â”‚
â”‚  â”‚    :8000    â”‚  â”‚    :8001    â”‚  â”‚    :8003    â”‚  â”‚   :8002   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                â”‚                â”‚                â”‚       â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                   â”‚                                 â”‚
â”‚   API LAYER (Fastify 5 - Thin Transport)                          â”‚
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚                          â”‚   API Server  â”‚                         â”‚
â”‚                          â”‚    :4000      â”‚                         â”‚
â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                                  â”‚                                  â”‚
â”‚   DATA LAYER                     â”‚                                  â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚         â”‚                        â”‚                        â”‚        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ PostgreSQL  â”‚          â”‚    Redis    â”‚          â”‚   Worker    â”‚â”‚
â”‚  â”‚     16      â”‚          â”‚    7.x      â”‚          â”‚  (BullMQ)   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                          â”‚                          â”‚
 â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
 â”‚   ID-porten   â”‚          â”‚     Vipps     â”‚          â”‚     BRREG     â”‚
 â”‚   (Auth)      â”‚          â”‚   (Payment)   â”‚          â”‚ (Verification)â”‚
 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h2 id="3.2-teknologivalg" tabindex="-1">3.2 Teknologivalg</h2>
<table>
<thead>
<tr>
<th>Komponent</th>
<th>Teknologi</th>
<th>Versjon</th>
<th>Begrunnelse</th>
</tr>
</thead>
<tbody>
<tr>
<td>Frontend</td>
<td>React + React Router</td>
<td>19 / 7</td>
<td>SSR, streaming, moderne</td>
</tr>
<tr>
<td>API</td>
<td>Fastify</td>
<td>5.x</td>
<td>HÃ¸y ytelse, TypeScript</td>
</tr>
<tr>
<td>Database</td>
<td>PostgreSQL</td>
<td>16.x</td>
<td>ACID, JSON, Range-typer</td>
</tr>
<tr>
<td>ORM</td>
<td>Drizzle</td>
<td>0.30+</td>
<td>Type-sikker, performant</td>
</tr>
<tr>
<td>Cache/Queue</td>
<td>Redis</td>
<td>7.x</td>
<td>Sessions, BullMQ</td>
</tr>
<tr>
<td>SprÃ¥k</td>
<td>TypeScript</td>
<td>5.x</td>
<td>Strict mode</td>
</tr>
<tr>
<td>Monorepo</td>
<td>pnpm + Turbo</td>
<td>-</td>
<td>Effektiv, caching</td>
</tr>
<tr>
<td>UI</td>
<td>@shared/ui</td>
<td>-</td>
<td>OKLCH tokens, WCAG AA</td>
</tr>
</tbody>
</table>
<h2 id="3.3-databaseskjema" tabindex="-1">3.3 Databaseskjema</h2>
<p><strong>Fire logiske skjemaer:</strong></p>
<pre class="code-block"><code class="language-sql sql">-- Plattformtjenester
CREATE SCHEMA platform;  -- tenants, users, orgs, auth

-- Domenelogikk
CREATE SCHEMA domain;    -- listings, bookings, payments

-- OvervÃ¥kning
CREATE SCHEMA monitoring; -- scans, reports, alerts

-- Delte ressurser
CREATE SCHEMA cross_cutting; -- files, assets
</code></pre>
<h2 id="3.4-monorepo-struktur" tabindex="-1">3.4 Monorepo-struktur</h2>
<pre class="code-block"><code class="language- ">digilist-platform/
â”œâ”€â”€ apps/                          # 8 applikasjoner
â”‚   â”œâ”€â”€ api/                       # Fastify REST API
â”‚   â”œâ”€â”€ web/                       # Publikumsportal
â”‚   â”œâ”€â”€ backoffice/               # Saksbehandler-UI
â”‚   â”œâ”€â”€ monitoring/               # QA Dashboard
â”‚   â”œâ”€â”€ docs/                     # Dokumentasjon
â”‚   â”œâ”€â”€ learning-hub/             # E-lÃ¦ring
â”‚   â”œâ”€â”€ saas/                     # Tenant Admin
â”‚   â””â”€â”€ worker/                   # BullMQ jobs
â”‚
â”œâ”€â”€ packages/                      # Delte pakker
â”‚   â”œâ”€â”€ server/
â”‚   â”‚   â”œâ”€â”€ data/                 # Drizzle ORM (domain)
â”‚   â”‚   â”œâ”€â”€ platform-data/        # Platform-skjema
â”‚   â”‚   â””â”€â”€ monitoring-data/      # OvervÃ¥kning-skjema
â”‚   â”‚
â”‚   â”œâ”€â”€ shared/
â”‚   â”‚   â”œâ”€â”€ ui/                   # @shared/ui komponentbibliotek
â”‚   â”‚   â”œâ”€â”€ i18n/                 # Internasjonalisering
â”‚   â”‚   â”œâ”€â”€ validation/           # Zod-skjemaer
â”‚   â”‚   â””â”€â”€ contracts/            # DTOs og kontrakter
â”‚   â”‚
â”‚   â””â”€â”€ client/
â”‚       â”œâ”€â”€ api-client/           # API-klient
â”‚       â””â”€â”€ domain-hooks/         # React Query hooks
â”‚
â”œâ”€â”€ infra/                         # Infrastruktur
â”‚   â””â”€â”€ deploy/
â”‚       â”œâ”€â”€ scripts/deploy.sh     # Deployment-skript
â”‚       â””â”€â”€ environments/         # MiljÃ¸konfig
â”‚
â””â”€â”€ docs/                          # Dokumentasjon
    â”œâ”€â”€ 01-product/               # PRD, SRSD
    â”œâ”€â”€ 02-architecture/          # Arkitektur
    â””â”€â”€ requirements/             # Kravsporing
</code></pre>
<hr>
<h1>Del 4: Testing og Kvalitetssikring</h1>
<h2 id="4.1-teststrategi" tabindex="-1">4.1 Teststrategi</h2>
<pre class="code-block"><code class="language- ">          â–² E2E (Journey Tests)
         â•± â•²  Playwright - 10%
        â•±   â•²
       â•±     â•²
      â–²â”€â”€â”€â”€â”€â”€â”€â–² Integration (Scenario)
     â•±         â•²  76 assertions - 20%
    â•±           â•²
   â•±             â•²
  â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–² Unit Tests
 â•±                 â•²  Vitest - 70%
â•±___________________â•²
</code></pre>
<h2 id="4.2-testtyper-og-dekning" tabindex="-1">4.2 Testtyper og Dekning</h2>
<table>
<thead>
<tr>
<th>Type</th>
<th>VerktÃ¸y</th>
<th>Dekningsgrad</th>
<th>FormÃ¥l</th>
</tr>
</thead>
<tbody>
<tr>
<td>Unit</td>
<td>Vitest</td>
<td>&gt;95%</td>
<td>Domenelogikk</td>
</tr>
<tr>
<td>Integration</td>
<td>Vitest + Supertest</td>
<td>&gt;90%</td>
<td>API-endepunkter</td>
</tr>
<tr>
<td>Scenario</td>
<td>Scenario Hub</td>
<td>76 assertions</td>
<td>Brukerhistorier</td>
</tr>
<tr>
<td>E2E/Journey</td>
<td>Playwright</td>
<td>Kritiske flyter</td>
<td>Brukerreiser</td>
</tr>
<tr>
<td>Accessibility</td>
<td>axe-core</td>
<td>WCAG 2.1 AA</td>
<td>Tilgjengelighet</td>
</tr>
<tr>
<td>Security</td>
<td>Semgrep, Gitleaks</td>
<td>100% kode</td>
<td>SÃ¥rbarheter</td>
</tr>
<tr>
<td>Performance</td>
<td>Lighthouse</td>
<td>Core Web Vitals</td>
<td>Ytelse</td>
</tr>
</tbody>
</table>
<h2 id="4.3-kravsporing" tabindex="-1">4.3 Kravsporing</h2>
<p>Alle krav har full sporbarhet gjennom <code>requirements.json</code>:</p>
<pre class="code-block"><code class="language-json json">{
  &quot;id&quot;: &quot;DOM-001&quot;,
  &quot;title&quot;: &quot;Listing as ONLY Bookable Entity&quot;,
  &quot;priority&quot;: &quot;P0&quot;,
  &quot;status&quot;: &quot;covered&quot;,
  &quot;traceability&quot;: {
    &quot;schema&quot;: [&quot;listings.ts&quot;],
    &quot;api&quot;: [&quot;listings-routes.ts&quot;],
    &quot;services&quot;: [&quot;listing.service.ts&quot;],
    &quot;hooks&quot;: [&quot;useListing.ts&quot;],
    &quot;frontend&quot;: [&quot;ListingCard.tsx&quot;],
    &quot;tests&quot;: [&quot;listing.test.ts&quot;]
  },
  &quot;acceptanceCriteria&quot;: {
    &quot;functional&quot;: [...],
    &quot;architecture&quot;: [...],
    &quot;testing&quot;: [...],
    &quot;monitoring&quot;: [...]
  }
}
</code></pre>
<h2 id="4.4-monitoring-dashboard" tabindex="-1">4.4 Monitoring Dashboard</h2>
<p>Sanntids overvÃ¥kning via <code>apps/monitoring</code>:</p>
<ul>
<li>Kravstatuser per modul</li>
<li>TestkjÃ¸ringshistorikk</li>
<li>Journey-rapporter med skjermbilder</li>
<li>DekningsmÃ¥linger</li>
<li>Sikkerhetsalarmer</li>
</ul>
<hr>
<h1>Del 5: Infrastruktur og Drift</h1>
<h2 id="5.1-produksjonsmilj%C3%B8" tabindex="-1">5.1 ProduksjonsmiljÃ¸</h2>
<table>
<thead>
<tr>
<th>Komponent</th>
<th>Spesifikasjon</th>
</tr>
</thead>
<tbody>
<tr>
<td>LeverandÃ¸r</td>
<td>Hostinger VPS</td>
</tr>
<tr>
<td>Lokasjon</td>
<td>Nederland (EU)</td>
</tr>
<tr>
<td>IP</td>
<td>72.61.23.56</td>
</tr>
<tr>
<td>OS</td>
<td>Ubuntu 22.04</td>
</tr>
<tr>
<td>Node.js</td>
<td>20.x LTS</td>
</tr>
<tr>
<td>PM2</td>
<td>v6.x</td>
</tr>
<tr>
<td>Nginx</td>
<td>Reverse Proxy + SSL</td>
</tr>
<tr>
<td>PostgreSQL</td>
<td>16.x (lokal)</td>
</tr>
<tr>
<td>Redis</td>
<td>7.x</td>
</tr>
<tr>
<td>SSL</td>
<td>Letâ€™s Encrypt (Certbot)</td>
</tr>
</tbody>
</table>
<h2 id="5.2-domener" tabindex="-1">5.2 Domener</h2>
<table>
<thead>
<tr>
<th>Subdomen</th>
<th>Port</th>
<th>FormÃ¥l</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="http://digilist.no">digilist.no</a></td>
<td>8000</td>
<td>Publikumsportal</td>
</tr>
<tr>
<td><a href="http://api.digilist.no">api.digilist.no</a></td>
<td>4000</td>
<td>REST API</td>
</tr>
<tr>
<td><a href="http://admin.digilist.no">admin.digilist.no</a></td>
<td>8001</td>
<td>Backoffice</td>
</tr>
<tr>
<td><a href="http://docs.digilist.no">docs.digilist.no</a></td>
<td>8002</td>
<td>Dokumentasjon</td>
</tr>
<tr>
<td><a href="http://learn.digilist.no">learn.digilist.no</a></td>
<td>8003</td>
<td>OpplÃ¦ring</td>
</tr>
<tr>
<td><a href="http://monitor.digilist.no">monitor.digilist.no</a></td>
<td>8004</td>
<td>QA Dashboard</td>
</tr>
</tbody>
</table>
<h2 id="5.3-deployment-protocol" tabindex="-1">5.3 Deployment Protocol</h2>
<p>Fire-fase deployment:</p>
<pre class="code-block"><code class="language-bash bash">./infra/deploy/scripts/deploy.sh production api

# Fase 1: BUILD
# Lokal bundling med tsup

# Fase 2: PACKAGE
# Opprett deployment-pakke

# Fase 3: SYNC
# rsync til VPS

# Fase 4: ACTIVATE
# PM2 restart + helsesjekk
</code></pre>
<hr>
<h1>Del 6: YtelsesmÃ¥l</h1>
<h2 id="6.1-tekniske-kpier" tabindex="-1">6.1 Tekniske KPIer</h2>
<table>
<thead>
<tr>
<th>Metrikk</th>
<th>MÃ¥l</th>
<th>MÃ¥ling</th>
</tr>
</thead>
<tbody>
<tr>
<td>LCP (Largest Contentful Paint)</td>
<td>&lt; 2.5s</td>
<td>Core Web Vitals</td>
</tr>
<tr>
<td>Time to Interactive</td>
<td>&lt; 3.5s</td>
<td>Lighthouse</td>
</tr>
<tr>
<td>API Response (p50)</td>
<td>&lt; 200ms</td>
<td>Appmonitor</td>
</tr>
<tr>
<td>API Response (p95)</td>
<td>&lt; 500ms</td>
<td>Appmonitor</td>
</tr>
<tr>
<td>Database Query (p95)</td>
<td>&lt; 100ms</td>
<td>DB-monitor</td>
</tr>
<tr>
<td>Samtidige brukere</td>
<td>1000+</td>
<td>Lasttesting</td>
</tr>
<tr>
<td>Tilgjengelighet</td>
<td>99.9%</td>
<td>Oppetidsmonitor</td>
</tr>
</tbody>
</table>
<h2 id="6.2-forretningsm%C3%A5l" tabindex="-1">6.2 ForretningsmÃ¥l</h2>
<table>
<thead>
<tr>
<th>Metrikk</th>
<th>Ã…r 1</th>
<th>Ã…r 2</th>
</tr>
</thead>
<tbody>
<tr>
<td>Registrerte brukere</td>
<td>10 000+</td>
<td>25 000+</td>
</tr>
<tr>
<td>MÃ¥nedlig aktive</td>
<td>5 000+</td>
<td>15 000+</td>
</tr>
<tr>
<td>Online booking-rate</td>
<td>&gt; 80%</td>
<td>&gt; 90%</td>
</tr>
<tr>
<td>Auto-godkjenningsrate</td>
<td>&gt; 60%</td>
<td>&gt; 70%</td>
</tr>
<tr>
<td>Anleggsutnyttelse</td>
<td>&gt; 70%</td>
<td>&gt; 80%</td>
</tr>
<tr>
<td>NPS</td>
<td>&gt; 50</td>
<td>&gt; 60</td>
</tr>
</tbody>
</table>
<hr>
<h1>Del 7: Prosjektplan</h1>
<h2 id="7.1-fase-1%3A-mvp-(q1-2025)-%E2%9C%85-levert" tabindex="-1">7.1 Fase 1: MVP (Q1 2025) âœ… LEVERT</h2>
<ul>
<li>âœ… Bookingmotor (alle 6 modeller)</li>
<li>âœ… AnleggshÃ¥ndtering (alle 6 typer)</li>
<li>âœ… Brukerautentisering</li>
<li>âœ… Grunnleggende godkjenningsflyt</li>
<li>âœ… E-postvarsling</li>
<li>âœ… Multi-tenant arkitektur</li>
<li>âœ… RBAC og tilgangskontroll</li>
</ul>
<h2 id="7.2-fase-2%3A-betaling-(q2-2025)" tabindex="-1">7.2 Fase 2: Betaling (Q2 2025)</h2>
<ul>
<li>Vipps-integrasjon</li>
<li>Fakturagenerering</li>
<li>Gjentakende bookinger</li>
<li>Mobiloptimalisert webapp</li>
</ul>
<h2 id="7.3-fase-3%3A-avansert-(q3-2025)" tabindex="-1">7.3 Fase 3: Avansert (Q3 2025)</h2>
<ul>
<li>RCO-integrasjon (lÃ¥skoder)</li>
<li>Sesongutleie-tildeling</li>
<li>Kalenderintegrasjoner</li>
<li>BRREG/NIF-verifisering</li>
</ul>
<h2 id="7.4-fase-4%3A-enterprise-(q4-2025)" tabindex="-1">7.4 Fase 4: Enterprise (Q4 2025)</h2>
<ul>
<li>Tverrkommunal booking</li>
<li>Offentlig API</li>
<li>White-label stÃ¸tte</li>
</ul>
<hr>
<h1>Vedlegg A: Ordliste</h1>
<table>
<thead>
<tr>
<th>Begrep</th>
<th>Definisjon</th>
</tr>
</thead>
<tbody>
<tr>
<td>Tenant</td>
<td>Kommune eller organisasjon som bruker Digilist</td>
</tr>
<tr>
<td>Listing</td>
<td>Bokbart anlegg (idrettshall, mÃ¸terom, etc.)</td>
</tr>
<tr>
<td>Bookable Unit</td>
<td>Underenhet som kan bookes separat</td>
</tr>
<tr>
<td>Actor Type</td>
<td>Prisgruppe (privatperson, idrettslag, etc.)</td>
</tr>
<tr>
<td>Allocation</td>
<td>Tidsblokk-reservasjon i kalender</td>
</tr>
<tr>
<td>RBAC</td>
<td>Role-Based Access Control</td>
</tr>
</tbody>
</table>
<hr>
<h1>Vedlegg B: Kravstatus-Sammendrag</h1>
<table>
<thead>
<tr>
<th>Modul</th>
<th>Antall</th>
<th>P0</th>
<th>P1</th>
<th>Dekket</th>
</tr>
</thead>
<tbody>
<tr>
<td>Domain (DOM)</td>
<td>17</td>
<td>6</td>
<td>11</td>
<td>17/17 âœ…</td>
</tr>
<tr>
<td>Platform (SAAS)</td>
<td>10</td>
<td>4</td>
<td>6</td>
<td>8/10</td>
</tr>
<tr>
<td>Tender (TND)</td>
<td>9</td>
<td>3</td>
<td>6</td>
<td>9/9 âœ…</td>
</tr>
<tr>
<td>Security (SEC)</td>
<td>4</td>
<td>4</td>
<td>0</td>
<td>4/4 âœ…</td>
</tr>
<tr>
<td><strong>Total</strong></td>
<td><strong>40</strong></td>
<td><strong>17</strong></td>
<td><strong>23</strong></td>
<td><strong>38/40</strong></td>
</tr>
</tbody>
</table>
<hr>
<p><em>Dokumentet generert: 8. januar 2026</em><br>
<em>Xala Technologies AS</em></p>

